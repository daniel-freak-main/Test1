<!DOCTYPE html>
<html>
	<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8;" lang="de" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		<script type="text/javascript" charset="utf-8" src="jquery.js"></script>
		
		<script>
			
			document.addEventListener("deviceready", onDeviceReady, false);

			function onDeviceReady() {
				//alert("Device is Ready");
				checklogout();
				go('http://kleverkids.de/b/s.start');
			}
			
			function go(url) 
			{
				high(url);
				//alert("go to");
    			var xmlhttp = new XMLHttpRequest();
   				xmlhttp.onreadystatechange=function(){
       				if (xmlhttp.readyState === 4){
            			if (xmlhttp.status === 200) {
							var inhalt = xmlhttp.responseText;
                			document.getElementById('content').innerHTML = inhalt;
            			}
        			}
    			}
    			xmlhttp.open("GET", url , true);
    			xmlhttp.send();
			}
			
			function checklogin() 
			{
				//alert("check");
				var login_n = window.localStorage.getItem("login_name");
				var login_p = window.localStorage.getItem("login_pass");
				var url = "http://kleverkids.de/mitglied/checkapp.php?un=" + login_n + "&pw=" + login_p;
    			var xmlhttp = new XMLHttpRequest();
   				xmlhttp.onreadystatechange=function(){
       				if (xmlhttp.readyState === 4){
            			if (xmlhttp.status === 200) {
                			go("http://kleverkids.de/mitglied/b/dateien/getnews.php?a=" + xmlhttp.responseText);
                			high("news");
            			}
        			}
    			};
    			xmlhttp.open("GET", url , true);
    			xmlhttp.send();
			}
			
			function login()
			{	
				//alert("Login");
				var n = document.getElementById('name').value;
				window.localStorage.setItem("login_name", n);
				var p = document.getElementById('pass').value;
				window.localStorage.setItem("login_pass", p);
				checklogin();
			}
			
			function logout()
			{	
				window.localStorage.setItem("login_name", "");
				window.localStorage.setItem("login_pass", "");
				checklogout();
			}
			
			function checklogout()
			{
				var login_n = window.localStorage.getItem("login_name");
				var login_p = window.localStorage.getItem("login_pass");
				var url = "http://kleverkids.de/mitglied/checklogout.php?un=" + login_n + "&pw=" + login_p;
    			var xmlhttp = new XMLHttpRequest();
   				xmlhttp.onreadystatechange=function(){
       				if (xmlhttp.readyState === 4){
            			if (xmlhttp.status === 200) {
                			if(xmlhttp.responseText == "LO")
							{
								alert("Logout");
							}
							else
							{
								alert("Login");
							}
            			}
        			}
    			};
    			xmlhttp.open("GET", url , true);
    			xmlhttp.send();
			}
			
			function high(url)
			{
				document.all.l1.style.backgroundColor = "#FF0000";
				document.all.l2.style.backgroundColor = "#FF0000";
				document.all.l3.style.backgroundColor = "#FF0000";
				document.all.l4.style.backgroundColor = "#FF0000";
				document.all.l5.style.backgroundColor = "#FF0000";
				document.all.l1.style.color = "#FFFFFF";
				document.all.l2.style.color = "#FFFFFF";
				document.all.l3.style.color = "#FFFFFF";
				document.all.l4.style.color = "#FFFFFF";
				document.all.l5.style.color = "#FFFFFF";
				if(url == 'http://kleverkids.de/b/s.start'){
					document.all.l1.style.backgroundColor = "#EEEEFF";
					document.all.l1.style.color = "#FF9900";
				}
				if(url == 'http://kleverkids.de/b/veranstaltungen'){
					document.all.l2.style.backgroundColor = "#EEEEFF";
					document.all.l2.style.color = "#FF9900";
				}
				if(url == 'http://kleverkids.de/b/news'){
					document.all.l3.style.backgroundColor = "#EEEEFF";
					document.all.l3.style.color = "#FF9900";
				}
				if(url == 'http://kleverkids.de/b/stammtisch'){
					document.all.l4.style.backgroundColor = "#EEEEFF";
					document.all.l4.style.color = "#FF9900";
				}
				if(url == 'news'){
					document.all.l5.style.backgroundColor = "#EEEEFF";
					document.all.l5.style.color = "#FF9900";
				}
			}
			
</script>
<style>
	body{
		background-color: #FFFFD0;
	}
	#main{
		margin: auto;
		background-color: #FFFF89;
		margin-bottom:100px;
	}
	#links{
		color: #FFFFFF;
		margin: auto;
		background-color: #FF0000;
	}
	#content{
		margin-top:20px;
		margin: auto;
		background-color: #EEEEFF;
	}
	#l1{
		background-color: #EEEEFF;
		color:#FF9900;
	}
</style>
	</head>
	<body>
		<div id="main">
			<div id="links">
				<img src="Kids.gif" width="90" height="70" alt="" /><a id="l1" onclick="go('http://kleverkids.de/b/s.start')">Kleverkids</a> <a id="l2" onclick="go('http://kleverkids.de/b/veranstaltungen')">Veranstaltungen</a> <a id="l3" onclick="go('http://kleverkids.de/b/news')">Aktuelles</a> <a id="l4" onclick="go('http://kleverkids.de/b/stammtisch')">Stammtisch</a> <a id="l5" onclick="checklogin()">News</a>
			</div>
			<div id="content">
				Seite konnte nicht geladen werden überprüfen sie bitte ihre Internet Verbindung.
			</div>
		</div>
	</body>
</html>
